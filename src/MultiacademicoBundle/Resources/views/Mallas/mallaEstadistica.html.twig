<link rel="stylesheet" href="{{asset('css/multiacademico.css')}}">
<link rel="stylesheet" href="{{asset('css/certificados.css')}}">
<link rel="stylesheet" href="{{asset('css/imprimir.css')}}">
<style>
    .dataTable thead tr th:first-child {
        min-width: 20px;
    }
</style>    
<style media="print" type="text/css">
@page rotated { size : landscape!important }
table { page : rotated!important }
</style>

<div class="noprint">
  <div class="paginah malla-pagina">
     {{include('MultiacademicoBundle:Reportes:encabezado.html.twig')}}
       
     <div class="info-aula">
              {%verbatim%}
              <div class="curso"><b>{{aula.curso.curso}} {{aula.especializacion.especializacion}}</b></div>
             
              <div class="curso"><b>Paralelo: "{{aula.paralelo}}"</b></div>
             
              <div class="curso"><b>Jornada {{(aula.seccion|limitTo:(aula.seccion.length-1))+'a'}}</b></div>
             {%endverbatim%}
              <div class="curso"><b>AÑO LECTIVO {{periodo.periodo}}</b></div>
      </div>
       <div id="imprimir" class="form-group">
           
                            {#{%verbatim%}
                                <div class="ckbox ckbox-primary" data-ng-repeat="distributivo in aula.distributivos" style="display:none;">
                                
                                <input id="M{{distributivo.distributivocodmateria.id}}" type="checkbox" data-ng-model="Materias[distributivo.distributivocodmateria.id]"  ng-init="Materias[distributivo.distributivocodmateria.id]=true" title="{{distributivo.distributivocodmateria.materia}}"  />
                                <label for="M{{distributivo.distributivocodmateria.id}}">{{distributivo.distributivocodmateria.materia}}</label>
                                </div>
                                
                                 
                             {%endverbatim%}#}
           
            <b>Quimestre Activo: {{'{{q}}'}} </b>
       <select data-ng-model="q" data-ng-init="q=qop[q-1].id" data-ng-options="q.id as q.label for q in qop" data-ng-change="changeq()" >
       </select> 


            <b>Parcial Activo:{{'{{p}}'}} </b>
                <select data-ng-model="p" data-ng-init="p=pop[p-1].id" data-ng-options="p.id as p.label for p in pop" data-ng-change="changeq()" >
                </select>
                <select data-ng-init="tam='1'" data-ng-model="tam">
                    <option value="1" >normal</option>
                    <option value="0">reducido</option>
                </select>
           {{include('MultiacademicoBundle:Reportes:botonimprimirMalla.html.twig')}}
       </div>
          <div class="detalle">
         <p class="textodetalle">

         </p>
     </div>
     <div class="malla-container">  
      <table id="malla-normal" class="malla-table letraprint1" border="1" width="100%" cellpadding="1" cellspacing="0" bgcolor="FFFFFF">
          <thead>
              <tr style="border-top:none">
                   <th rowspan="2" class="no-border" >&nbsp;</th>    
                    <th rowspan="2" class="no-border" >&nbsp;</th>
                    {%verbatim%}
                                <th ng-class="{'no-border':distributivo.distributivocodmateria.materiatipo!=='OFERTAINST',
                                               'border-top-solid':distributivo.distributivocodmateria.materiatipo==='OFERTAINST'
                                }"  colspan="{{encabezado.materiacolspan()}}" data-ng-repeat="distributivo in aula.distributivos">
                                 <span ng-if="distributivo.distributivocodmateria.materiatipo==='OFERTAINST'">OFERTA INSTITUCIONAL </span></th>
                    {%endverbatim%}
              </tr>    
             <tr> 
                 
          {#<th rowspan="2" style="height: 140px;vertical-align:bottom;"><div class="solo-rotar" style="width: 30px;">COMPORTAMIENTO</div></th>#}
                             {%verbatim%}
                                <th colspan="{{encabezado.materiacolspan()}}" data-ng-repeat="distributivo in aula.distributivos">
                                 {{distributivo.distributivocodmateria.materia}} </th> 
                             {%endverbatim%}
             <th class="finales" ng-if="p<=3&&q<3&&aula.recibeProyectoEscolar()" rowspan="2" style="vertical-align:bottom;"><div class="solo-rotar" style="width: 30px;">PROYECTO ESCOLAR</div></th>   
             <th class="finales" ng-if="p<=3&&q<3" rowspan="2" style="vertical-align:bottom;"><div class="solo-rotar" style="width: 30px;">COMPORTAMIENTO</div></th>
             <th class="finales" ng-if="p<=3&&q<3" rowspan="2" style="vertical-align:bottom;"><div class="solo-rotar" style="width: 30px;">PROMEDIO PARCIAL</div></th>
             
             <th class="finales" ng-if="p==4&&q<3" rowspan="2" style="vertical-align:bottom;"><div class="solo-rotar" style="width: 30px;">PR.MATERIAS BASICAS</div></th>
             <th class="finales" ng-if="p==4&&q<3" rowspan="2" style="vertical-align:bottom;"><div class="solo-rotar" style="width: 30px;">PROMEDIO QUIMESTRE</div></th>
             
             <th class="finales" ng-if="q==3" rowspan="2" style="vertical-align:bottom;"><div class="solo-rotar" style="width: 30px;">SUMA</div></th>
             <th class="finales" ng-if="q==3" rowspan="2" style="vertical-align:bottom;"><div class="solo-rotar" style="width: 30px;">PROMEDIO</div></th>
             <!--
            <th rowspan="2" style="background-color: orange;vertical-align:bottom;">CLUBES: CAMPO&nbsp;DE&nbsp;ACCION</th>
            <th rowspan="2" style="background-color: orange;vertical-align:bottom;">NOTA</th>-->
                
             </tr>
             <tr> 
                 <th>&nbsp;</th>
                  
          <th style="width: 600px">
             <div style="display:inline-block;vertical-align:-webkit-baseline-middle;width:250px;height:15px;font-size:8.0pt;font-family:Tahoma;color:#000000">
              Apellidos y nombres
             </div></th>
                    
                   <td data-ng-repeat-start="distributivo in aula.distributivos" ng-if="p<=3&&q<3" class="malla-field" style="background-color: gainsboro;" ><div class="solo-rotar" ng-class="{'malla-field-rotate': !estaReducido(),'malla-field-rotate-min': estaReducido() }">PROMEDIO</div></td>
                   <td data-ng-repeat-end ng-if="p<=3&&q<3" class="malla-field" style="background-color: gainsboro;" ><div class="solo-rotar" ng-class="{'malla-field-rotate': !estaReducido(),'malla-field-rotate-min': estaReducido() }">E.&nbsp;Cualitativa</div></td> 
                <!-- Quimestrales -->   
                <td  data-ng-repeat-start="distributivo in aula.distributivos" ng-if="p==4&&q<3" style="background-color: white;height:90px;vertical-align:bottom;"><div class="solo-rotar" style="width: 20px;line-height: 1em;">I&nbsp;PARCIAL</div></td>
                <td ng-if="p==4&&q<3" style="background-color: white;height:90px;vertical-align:bottom;"><div class="solo-rotar" style="width: 20px;line-height: 1em;">II&nbsp;PARCIAL</div></td>
                <td ng-if="p==4&&q<3" style="background-color: white;height:90px;vertical-align:bottom;"><div class="solo-rotar" style="width: 20px;line-height: 1em;">III&nbsp;PARCIAL</div></td>
                <td ng-if="p==4&&q<3" style="background-color: white;height:90px;vertical-align:bottom;"><div class="solo-rotar" style="width: 20px;line-height: 1em;">PROMEDIO PARCIAL</div></td>
                <td ng-if="p==4&&q<3" style="background-color: white;height:90px;vertical-align:bottom;"><div class="solo-rotar" style="width: 20px;line-height: 1em;">80%&nbsp;DE&nbsp;LOS PARCIALES</div></td>
                <td ng-if="p==4&&q<3" style="background-color: white;height:90px;vertical-align:bottom;"><div class="solo-rotar" style="width: 20px;line-height: 1em;">EXAMEN</div></td>
                <td ng-if="p==4&&q<3" style="background-color: white;height:90px;vertical-align:bottom;"><div class="solo-rotar" style="width: 20px;line-height: 1em;">20%&nbsp;DEL EXAMEN</div></td>
                <td data-ng-repeat-end ng-if="p==4&&q<3"  style="background-color: gainsboro;height:90px;vertical-align:bottom;"><div class="solo-rotar" style="width: 20px;line-height: 1em;">N&nbsp;O&nbsp;T&nbsp;A QUIMESTRAL</div></td>

                 
                   <td data-ng-repeat-start="distributivo in aula.distributivos" ng-if="q==3" class="malla-field" style="background-color: gainsboro;"><div class="solo-rotar" style="width: 30px">PROMEDIO ANUAL</div></td> 
                   <td ng-if="q==3" class="malla-field" style="background-color: gainsboro;"><div class="solo-rotar" style="width: 30px">EXAMEN RECUPERAC</div></td> 
                   <td ng-if="q==3" class="malla-field" style="background-color: gainsboro;"><div class="solo-rotar" style="width: 30px">EXAMEN SUPLETORIO</div></td> 
                   <td ng-if="q==3" class="malla-field" style="background-color: gainsboro;"><div class="solo-rotar" style="width: 30px">EXAMEN REMEDIAL</div></td> 
                   <td data-ng-repeat-end ng-if="q==3" class="malla-field" style="background-color: gainsboro;"><div class="solo-rotar" style="width: 30px">PROMEDIO FINAL</div></td> 
                                      
            </tr>
          </thead>
          <tbody>   
              
                   {%verbatim%}
                  
                   <tr data-ng-repeat="alumno in aula.matriculados">
                   <td>{{alumno.id}}</td>   
                   <td>
                        <div class="letraprint1" style="text-align: left;display:inline-block;width:250px;height:15px;">{{alumno.matriculacodestudiante.estudiante}}</div>
                   </td>
                                      
                   <!--<td>E</td>-->
                               <td data-ng-repeat-start="distributivo in aula.distributivos" ng-if="p<=3&&q<3" nota-p="p" nota-q="q" nota-color-active nota-value="prparcial($parent.$parent.$index,distributivo.distributivocodmateria.id)" style=" -webkit-print-color-adjust:exact;" ></td>
                               <td data-ng-repeat-end ng-if="p<=3&&q<3" style=" -webkit-print-color-adjust:exact;background-color: gainsboro;"  >{{cualitativa(prparcial($parent.$parent.$index,distributivo.distributivocodmateria.id))}}</td> 
                                                          
                            
                               <td data-ng-repeat-start="distributivo in aula.distributivos" ng-if="p==4&&q<3" nota-p="p" nota-q="q" nota-color-active nota-value="prparcial($parent.$parent.$index,distributivo.distributivocodmateria.id,q,1)"></td>
                            <td ng-if="p==4&&q<3" nota-p="p" nota-q="q" nota-color-active nota-value="prparcial($parent.$parent.$index,distributivo.distributivocodmateria.id,q,2)"></td>
                            <td ng-if="p==4&&q<3" nota-p="p" nota-q="q" nota-color-active nota-value="prparcial($parent.$parent.$index,distributivo.distributivocodmateria.id,q,3)"></td>
                            <td ng-if="p==4&&q<3" >{{prparciales($parent.$parent.$index,distributivo.distributivocodmateria.id,q)}}</td>
                            <td ng-if="p==4&&q<3" >{{prparciales80($parent.$parent.$index,distributivo.distributivocodmateria.id,q)}}</td>
                            <td ng-if="p==4&&q<3">{{findCalificacion(alumno,distributivo.distributivocodmateria.id)['q'+q+'_ex']}}</td> 
                            <td ng-if="p==4&&q<3" >{{ex20($parent.$parent.$index,distributivo.distributivocodmateria.id,q)}}</td>
                            <td data-ng-repeat-end ng-if="p==4&&q<3" style="font-weight: bold;-webkit-print-color-adjust:exact;background-color: gainsboro;" nota-p="p" nota-q="q" nota-color-active nota-value="prq($parent.$parent.$index,distributivo.distributivocodmateria.id,q)"></td>
                            
                            <td data-ng-repeat-start="distributivo in aula.distributivos" ng-if="q==3" >{{pra($parent.$parent.$index,distributivo.distributivocodmateria.id)}}</td>
                            <td ng-if="q==3">{{findCalificacion(alumno,distributivo.distributivocodmateria.id)['mejoramiento']}}</td> 
                            <td ng-if="q==3">{{findCalificacion(alumno,distributivo.distributivocodmateria.id)['supletorio']}}</td> 
                            <td ng-if="q==3">{{findCalificacion(alumno,distributivo.distributivocodmateria.id)['gracia']}}</td> 
                            <td ng-if="q==3" data-ng-repeat-end style=" -webkit-print-color-adjust:exact;background-color: gainsboro;">{{prf($parent.$parent.$index,distributivo.distributivocodmateria.id)}}</td> 
                            <td ng-if="p<=3&&q<3&&aula.recibeProyectoEscolar()" ng-class="{'btn-danger':proyectoparcial($index,q,p)=='S.P.','btn-warning':proyectoparcial($index,q,p)=='N/A'}">{{proyectoparcial($index,q,p)}}</td> 
                            <td ng-if="p<=3&&q<3" ng-class="{'btn-danger':comportamientoparcial($index,q,p)=='S.C.','btn-warning':comportamientoparcial($index,q,p)=='N/A'}">{{comportamientoparcial($index,q,p)}}</td> 
                            <td ng-if="p<=3&&q<3" style=" -webkit-print-color-adjust:exact;background-color:yellow;">{{prgp($index,q,p)}}</td>
                            
                            <td ng-if="p==4&&q<3" style=" -webkit-print-color-adjust:exact;background-color:yellow;">{{prgqMateriasBasicas($index,q)}}</td> 
                            <td ng-if="p==4&&q<3" style=" -webkit-print-color-adjust:exact;background-color:yellow;">{{prgq($index,q)}}</td> 
                            
                           <td ng-if="q==3">{{sumf($index)}}</td> 
                            <td ng-if="q==3" style=" -webkit-print-color-adjust:exact;background-color:yellow;">{{prg($index)}}</td> 
                           
                           <td ng-if="q==3&&!apruebaAnioLectivo($index)" colspan="2">PIERDE AÑO</td>
                           
                          
                           <!--
                           <td ng-if="q==3" style=" -webkit-print-color-adjust:exact;background-color: gainsboro;">{{sumf($index)}}</td> 
                                                        <td colspan="2">PIERDE AÑO</td>-->
                             
                                   
                                         </tr>
                   {%endverbatim%} 
                           
                    </tbody>
          <tfoot>
              {%verbatim%}
              <tr style="vertical-align: bottom;">
                  <th colspan="2" style='text-align: center;'>
                      PROMEDIO &nbsp;&nbsp; ASIGNATURA
                  </th>
                  <th data-ng-repeat-start="distributivo in aula.distributivos" ng-if="p<=3&&q<3" nota-p="p" nota-q="q" nota-color-active nota-value="prparcialMateria(distributivo.distributivocodmateria.id)" style="text-align: center;-webkit-print-color-adjust:exact;" ></th>
                  <th data-ng-repeat-end ng-if="p<=3&&q<3" style="text-align: center;-webkit-print-color-adjust:exact;background-color: gainsboro;"  >{{cualitativa(prparcialMateria(distributivo.distributivocodmateria.id))}}</th>
                  
                  
                  <td data-ng-repeat-start="distributivo in aula.distributivos" ng-if="p==4&&q<3" >{{prparcialMateria(distributivo.distributivocodmateria.id,q,1)}}</td>
                  <td ng-if="p==4&&q<3"  >{{prparcialMateria(distributivo.distributivocodmateria.id,q,2)}}</td>
                  <td ng-if="p==4&&q<3" >{{prparcialMateria(distributivo.distributivocodmateria.id,q,3)}}</td>
                  <td ng-if="p==4&&q<3" >{{prparcialesMateria(distributivo.distributivocodmateria.id,q)}}</td>
                  <td ng-if="p==4&&q<3" >{{prparciales80Materia(distributivo.distributivocodmateria.id,q)}}</td>
                  <td ng-if="p==4&&q<3">{{prExamenMateria(distributivo.distributivocodmateria.id)}}</td>
                  <td ng-if="p==4&&q<3" >{{ex20Materia(distributivo.distributivocodmateria.id,q)}}</td>
                  <th data-ng-repeat-end ng-if="p==4&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color: gainsboro;"  >{{prqMateria(distributivo.distributivocodmateria.id,q)}}</th>
                  
                  <th colspan="3" ng-if="p<=3&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color:yellow;">{{prgpMateria(q,p)}}</th>
                  <th ng-if="p==4&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color:yellow;">{{prgqAulaMateriasBasicas(q)}}</th> 
                  <th ng-if="p==4&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color:yellow;">{{prgqAula(q)}}</th> 
                  
              </tr>
              <tr style="vertical-align: middle;">
                  <th rowspan=3 colspan="2" style='text-align: center;'>
                        INDICADORES &nbsp;&nbsp; CALIDAD
                  </th>
                  <td data-ng-repeat-start="distributivo in aula.distributivos" ng-if="p<=3&&q<3" >&lt;{{calificacionminima}}:</td>
                  <th data-ng-repeat-end ng-if="p<=3&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color: gainsboro;"  >{{clasificarPromediosPorAltura(promediosParcialMateria(distributivo.distributivocodmateria.id,q,p)).porcentajeNotasBajas}}%</th>
                  <th colspan="3" ng-if="p<=3&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color:yellow;">{{clasificarPromediosPorAltura(promediosGeneralesParcialMateria(q,p)).porcentajeNotasBajas}}%</th>
                  
                  <td colspan="7" data-ng-repeat-start="distributivo in aula.distributivos" ng-if="p==4&&q<3" >&lt;{{calificacionminima}}:</td>
                  <th data-ng-repeat-end ng-if="p==4&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color: gainsboro;"  >{{clasificarPromediosPorAltura(promediosQuimestreMateria(distributivo.distributivocodmateria.id,q)).porcentajeNotasBajas}}%</th>
                  <th ng-if="p==4&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color:yellow;">{{clasificarPromediosPorAltura(promediosGeneralesQuimestreMateriasBasicas(q)).porcentajeNotasBajas}}%</th>
                  <th ng-if="p==4&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color:yellow;">{{clasificarPromediosPorAltura(promediosGeneralesQuimestreMateria(q)).porcentajeNotasBajas}}%</th> 
              </tr>
              <tr>
                  <td data-ng-repeat-start="distributivo in aula.distributivos" ng-if="p<=3&&q<3" >&lt;{{calificacionmeta}}:</td>
                  <th data-ng-repeat-end ng-if="p<=3&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color: gainsboro;"  >{{clasificarPromediosPorAltura(promediosParcialMateria(distributivo.distributivocodmateria.id,q,p)).porcentajeNotasMedias}}%</th>
                  <th colspan="3" ng-if="p<=3&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color:yellow;">{{clasificarPromediosPorAltura(promediosGeneralesParcialMateria(q,p)).porcentajeNotasMedias}}%</th>
                  
                  <td colspan="7" data-ng-repeat-start="distributivo in aula.distributivos" ng-if="p==4&&q<3" >&lt;{{calificacionmeta}}:</td>
                  <th data-ng-repeat-end ng-if="p==4&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color: gainsboro;"  >{{clasificarPromediosPorAltura(promediosQuimestreMateria(distributivo.distributivocodmateria.id,q)).porcentajeNotasMedias}}%</th>
                  <th ng-if="p==4&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color:yellow;">{{clasificarPromediosPorAltura(promediosGeneralesQuimestreMateriasBasicas(q)).porcentajeNotasMedias}}%</th>
                  <th ng-if="p==4&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color:yellow;">{{clasificarPromediosPorAltura(promediosGeneralesQuimestreMateria(q)).porcentajeNotasMedias}}%</th> 
              </tr>    
              <tr>
                  <td data-ng-repeat-start="distributivo in aula.distributivos" ng-if="p<=3&&q<3" >&gt;{{calificacionmeta}}:</td>
                  <th data-ng-repeat-end ng-if="p<=3&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color: gainsboro;"  >{{clasificarPromediosPorAltura(promediosParcialMateria(distributivo.distributivocodmateria.id,q,p)).porcentajeNotasAltas}}%</th>
                  <th colspan="3" ng-if="p<=3&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color:yellow;">{{clasificarPromediosPorAltura(promediosGeneralesParcialMateria(q,p)).porcentajeNotasAltas}}%</th>
                  
                  <td colspan="7" data-ng-repeat-start="distributivo in aula.distributivos" ng-if="p==4&&q<3" >&gt;{{calificacionmeta}}:</td>
                  <th data-ng-repeat-end ng-if="p==4&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color: gainsboro;"  >{{clasificarPromediosPorAltura(promediosQuimestreMateria(distributivo.distributivocodmateria.id,q)).porcentajeNotasAltas}}%</th>
                  <th ng-if="p==4&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color:yellow;">{{clasificarPromediosPorAltura(promediosGeneralesQuimestreMateriasBasicas(q)).porcentajeNotasAltas}}%</th>
                  <th ng-if="p==4&&q<3" style="text-align: center; -webkit-print-color-adjust:exact;background-color:yellow;">{{clasificarPromediosPorAltura(promediosGeneralesQuimestreMateria(q)).porcentajeNotasAltas}}%</th> 
              </tr> 
              {%endverbatim%}
              {#<tr style="height: 2cm;vertical-align: bottom;">
                  <td colspan="2">
                      DIRECTOR / RECTOR     (firma y sello)
                  </td>    
              </tr>#}
          </tfoot>
          </table>
     </div>     
      <!--malla-->
 <!--<div style="page-break-after: always;"></div>
<!-- </div>
</div>    -->





    <!-- Identify where the chart should be drawn. -->
  

</div>
          </div>
     {%verbatim%}              
         <div rendimiento-estudiantil-aula-chart aula="aula" titulo="Grafico de Malla" p="p" q="q"></div>
         <div rendimiento-estudiantil-pareto-aula-chart aula="aula" titulo="Desempeño colectivo de las asignaturas todas las materias" p="p" q="q"></div>
         <div todas-materias-aula-cualitativa-chart aula="aula" titulo="Desempeño colectivo de las asignaturas todas las materias (Cualitativa)" p="p" q="q"></div>
     {%endverbatim%}
