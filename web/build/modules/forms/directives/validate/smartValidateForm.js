define(["modules/forms/module","modules/forms/common","jquery-validation"],function(a){"use strict";return a.registerDirective("smartValidateForm",function(){return{restrict:"A",link:function(a,b,c){var d={rules:{},messages:{},highlight:function(a){$(a).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(a){$(a).closest(".form-group").removeClass("has-error").addClass("has-success")},errorElement:"span",errorClass:"help-block",errorPlacement:function(a,b){b.parent(".input-group").length?a.insertAfter(b.parent()):a.insertAfter(b)}};b.find("[data-smart-validate-input], [smart-validate-input]").each(function(){var a=$(this),b=a.attr("name");d.rules[b]={},void 0!=a.data("required")&&(d.rules[b].required=!0),void 0!=a.data("email")&&(d.rules[b].email=!0),void 0!=a.data("maxlength")&&(d.rules[b].maxlength=a.data("maxlength")),void 0!=a.data("minlength")&&(d.rules[b].minlength=a.data("minlength")),void 0!=a.data("remote")&&(d.rules[b].remote={url:a.data("remote"),type:"post",async:!0}),a.data("message")?d.messages[b]=a.data("message"):angular.forEach(a.data(),function(a,c){if(0==c.search(/message/)){d.messages[b]||(d.messages[b]={});var e=c.toLowerCase().replace(/^message/,"");d.messages[b][e]=a}})}),b.validate(d)}}})});