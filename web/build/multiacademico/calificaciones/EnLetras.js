define(["multiacademico/multiacademico"],function(a){"use strict";return a.registerService("EnLetras",function(){function a(a,b,c,d){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+a)?+a:0,f=isFinite(+b)?Math.abs(b):0,g="undefined"==typeof d?",":d,h="undefined"==typeof c?".":c,i="",j=function(a,b){var c=Math.pow(10,b);return""+(Math.round(a*c)/c).toFixed(b)};return i=(f?j(e,f):""+Math.round(e)).split("."),i[0].length>3&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,g)),(i[1]||"").length<f&&(i[1]=i[1]||"",i[1]+=new Array(f-i[1].length+1).join("0")),i.join(h)}return{EnLetras:{Void:"",SP:" ",Dot:".",Zero:"0",Neg:"Menos",ValorEnLetras:function(b,c){"undefined"==typeof c&&(c="");var d,e,f="",g="";g=parseFloat(b)<0?this.Neg+" ":"",f=b%1!==0?a(b,2,".",""):b.toString();var h=f.indexOf(this.Dot);-1===h?(d=f,e=this.Void):(d=f.substr(0,h),e=f.substr(h+1)),f=d===this.Zero||d===this.Void?"Cero ":d.length>7?this.SubValLetra(parseInt(d.substr(0,d.length-6)))+"Millones "+this.SubValLetra(parseInt(d.substr(-6,6))):this.SubValLetra(parseInt(d)),("Millones "===f.substr(-9,9)||"Millón "===f.substr(-7,7))&&(f+="de "),f+=c,e!==this.Void&&(f=f+" coma "+this.SubValLetra(parseInt(e)));var i=g+f+" ";return i=i.replace("y Cero","")},SubValLetra:function(a){var b,c=0,d=0,e="",f="",g="";for(e=a.toString().trim(),c=e.length,g=this.Void,d=c;d>0;)g=this.Parte(parseInt(e.substr(c-d,1)+this.Zero.repeat(d-1))),"Cero"!==g&&(f=f+g+this.SP),d--;for(f=f.replace(" Mil Mil"," Un Mil");;){if(b=f.indexOf("Mil "),-1===b)break;if(-1===f.indexOf("Mil ",b+1))break;f=this.ReplaceStringFrom(f,"Mil ","",b)}b=-1;do b=f.indexOf("Cien ",b+1),-1!==b&&(g=f.substr(b+5,1),"M"!==g&&g!==this.Void&&(f=this.ReplaceStringFrom(f,"Cien","Ciento",b)));while(-1!==b);for(f=f.replace("Diez Cero","Diez"),f=f.replace("Diez Uno","Once"),f=f.replace("Diez Dos","Doce"),f=f.replace("Diez Tres","Trece"),f=f.replace("Diez Cuatro","Catorce"),f=f.replace("Diez Cinco","Quince"),f=f.replace("Diez Seis","Dieciseis"),f=f.replace("Diez Siete","Diecisiete"),f=f.replace("Diez Ocho","Dieciocho"),f=f.replace("Diez Nueve","Diecinueve"),f=f.replace("Veinte Cero","Veinte"),f=f.replace("Veinte Uno","Veintiuno"),f=f.replace("Veinte Dos","Veintidos"),f=f.replace("Veinte Tres","Veintitres"),f=f.replace("Veinte Cuatro","Veinticuatro"),f=f.replace("Veinte Cinco","Veinticinco"),f=f.replace("Veinte Seis","Veintiseis"),f=f.replace("Veinte Siete","Veintisiete"),f=f.replace("Veinte Ocho","Veintiocho"),f=f.replace("Veinte Nueve","Veintinueve"),"M"===f.substr(0,1)&&(f="Un "+f),d=65;88>=d;d++)77!==d&&(f=f.replace("a "+String.fromCharCode(d),"* y "+String.fromCharCode(d)));return f=f.replace("*","a")},ReplaceStringFrom:function(a,b,c,d){var e=a.substr(0,d)+c+a.substr(b.length+d);return e},Parte:function(a){var b="",c="",d=0;do{switch(a){case 0:c="Cero";break;case 1:c="Uno";break;case 2:c="Dos";break;case 3:c="Tres";break;case 4:c="Cuatro";break;case 5:c="Cinco";break;case 6:c="Seis";break;case 7:c="Siete";break;case 8:c="Ocho";break;case 9:c="Nueve";break;case 10:c="Diez";break;case 20:c="Veinte";break;case 30:c="Treinta";break;case 40:c="Cuarenta";break;case 50:c="Cincuenta";break;case 60:c="Sesenta";break;case 70:c="Setenta";break;case 80:c="Ochenta";break;case 90:c="Noventa";break;case 100:c="Cien";break;case 200:c="Doscientos";break;case 300:c="Trescientos";break;case 400:c="Cuatrocientos";break;case 500:c="Quinientos";break;case 600:c="Seiscientos";break;case 700:c="Setecientos";break;case 800:c="Ochocientos";break;case 900:c="Novecientos";break;case 1e3:c="Mil";break;case 1e6:c="Millón"}if(c!==this.Void)break;d+=1,a/=1e3,0===a&&(d=0)}while(0!==d);switch(b=c,d){case 0:c=this.Void;break;case 1:c=" Mil";break;case 2:c=" Millones";break;case 3:c=" Billones"}return b+c}}}})});