function timeago(a){var b={fechainteligente:function(a){var b=Math.floor(Date.now()/1e3)-a;return 0>=b?"Ahora":60>b?"hace "+this.ConSoSinS(Math.floor(b)," segundo(s)"):3600>b?"hace "+this.ConSoSinS(Math.floor(b/60)," minuto(s)"):86400>b?"hace "+this.ConSoSinS(Math.floor(b/3600)," hora(s)"):2592e3>b?"hace "+this.ConSoSinS(Math.floor(b/86400)," día(s)"):31104e3>b?"hace "+this.ConSoSinS(Math.floor(b/2592e3)," mes(es)"):"hace "+this.ConSoSinS(Math.floor(b/31104e3)," año(s)")},getColor:function(a){var b=Math.floor(Date.now()/1e3)-a;return 0>=b?"orange":60>b?"orange":3600>b?"green":86400>b?"blue":"grey"},ConSoSinS:function(a,b){return a>1?a+b.replace(/\u0028|\u0029/g,""):a+b.replace(/\u0028s\u0029|\u0028es\u0029/g,"")}};return b.fechainteligente(a)}define(["angular","angular-couch-potato","ionsound","angular-ui-router"],function(a,b){"use strict";var c=a.module("blankonController",[]).controller("BlankonCtrl",["$scope","$http","settings","$firebaseObject","$firebaseArray","User",function(a,b,c,d,e,f){f.initialized.then(function(){firebase.auth().signInWithCustomToken(f.fToken).then(function(a){console.log("Logged in as:",a.uid)})["catch"](function(a){console.log("Authentication failed:",a)})});var g=firebase.database().ref();a.supportIE=function(){var a=!1,b=!1,c=!1;a=!!navigator.userAgent.match(/MSIE 8.0/),b=!!navigator.userAgent.match(/MSIE 9.0/),c=!!navigator.userAgent.match(/MSIE 10.0/),c&&$("html").addClass("ie10"),(c||b||a)&&$("html").addClass("ie"),(a||b)&&$("input[placeholder]:not(.placeholder-no-fix), textarea[placeholder]:not(.placeholder-no-fix)").each(function(){var a=$(this);""==a.val()&&""!=a.attr("placeholder")&&a.addClass("placeholder").val(a.attr("placeholder")),a.focus(function(){a.val()==a.attr("placeholder")&&a.val("")}),a.blur(function(){(""==a.val()||a.val()==a.attr("placeholder"))&&a.val(a.attr("placeholder"))})})},a.cookieSidebarMinimize=function(){"active"==$.cookie("page_sidebar_minimize")&&$("body").addClass("page-sidebar-minimize")},a.soundPage=function(){$(".page-sound").length&&(ion.sound({sounds:[{name:"beer_can_opening"},{name:"bell_ring",volume:.6},{name:"branch_break",volume:.3},{name:"button_click"},{name:"button_click_on"},{name:"button_push"},{name:"button_tiny",volume:.6},{name:"camera_flashing"},{name:"camera_flashing_2",volume:.6},{name:"cd_tray",volume:.6},{name:"computer_error"},{name:"door_bell"},{name:"door_bump",volume:.3},{name:"glass"},{name:"keyboard_desk"},{name:"light_bulb_breaking",volume:.6},{name:"metal_plate"},{name:"metal_plate_2"},{name:"pop_cork"},{name:"snap"},{name:"staple_gun"},{name:"tap",volume:.6},{name:"water_droplet"},{name:"water_droplet_2"},{name:"water_droplet_3",volume:.6}],path:"assets/global/plugins/bower_components/ionsound/sounds/",preload:!0}),$(".dropdown-toggle").on("click",function(){ion.sound.play("water_droplet_3")}))},a.tooltip=function(){$("[data-toggle=tooltip]").length&&$("[data-toggle=tooltip]").tooltip({animation:"fade"})},a.popover=function(){$("[data-toggle=popover]").length&&$("[data-toggle=popover]").popover()},a.navbarMessages=[],b.get(c.dataPath+"/partials/header/navbar-messages.json").success(function(b){a.navbarMessages=b}).error(function(a,b,c,d){}),f.initialized.then(function(){var b=g.child("notificaciones").child(f.username).orderByChild("date");a.navbarNotifications={title:"Notificaciones",length:function(){return this.data.length},unread:function(){function a(a){return a.read===!1}return this.data.filter(a).length},data:e(b)}}),a.leerNotificacion=function(a){a.read=!0,b.post(Routing.generate("notificaciones_read",{id:a.$id})).success(function(b){a.read=!0}).error(function(b,c,d,e){a.read=!1})},a.timeago=function(a){return timeago(a)},a.profile=[],b.get(c.dataPath+"/partials/sidebar-right/profile.json").success(function(b){a.profile=b}).error(function(a,b,c,d){}),a.chats=[],b.get(c.dataPath+"/partials/sidebar-right/chat.json").success(function(b){a.chats=b}).error(function(a,b,c,d){}),a.$on("ocLazyLoad.moduleLoaded",function(a,b){console.log("event module loaded",b)}),a.$on("ocLazyLoad.componentLoaded",function(a,b){console.log("event component loaded",b)}),a.$on("ocLazyLoad.fileLoaded",function(a,b){console.log("event file loaded",b)}),a.cookieSidebarMinimize(),a.soundPage(),a.tooltip(),a.popover()}]);return b.configureApp(c),c.run(["$couchPotato",function(a){c.lazy=a}]),c});