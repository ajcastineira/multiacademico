define(["angular","angular-couch-potato","angular-ui-router","bootstrap-session-timeout","jquery-gritter","flot-pack","dropzone","skycons"],function(a,b){"use strict";var c=a.module("app.dashboard",[]).controller("DashboardCtrl",["$scope","$http","$browser","settings","ResumenInicio","activities",function(a,b,c,d,e,f){var g=c.baseHref();g=g.replace("app_dev.php/",""),a.resumen=e,e.mejoresparcial.length>0?(a.mejorestudianteparcial=e.mejoresparcial[0],a.mejorestudianteparcialfoto=g+a.mejorestudianteparcial.calificaciones.calificacionnummatricula.matriculacodestudiante.usuario.picture,a.mejorestudiante2parcial=e.mejoresparcial[1],a.mejorestudiante2parcialfoto=g+a.mejorestudiante2parcial.calificaciones.calificacionnummatricula.matriculacodestudiante.usuario.picture,a.mejorestudiante3parcial=e.mejoresparcial[2],a.mejorestudiante3parcialfoto=g+a.mejorestudiante3parcial.calificaciones.calificacionnummatricula.matriculacodestudiante.usuario.picture):(a.mejorestudianteparcial=null,a.mejorestudiante2parcial=null,a.mejorestudiante3parcial=null,a.mejorestudianteparcialfoto=null,a.mejorestudiante2parcialfoto=null,a.mejorestudiante3parcialfoto=null),e.mejoresquimestre.length>0?(a.mejorestudiantequimestre=e.mejoresquimestre[0],a.mejorestudiantequimestrefoto=g+a.mejorestudiantequimestre.calificaciones.calificacionnummatricula.matriculacodestudiante.usuario.picture):(a.mejorestudiantequimestre=null,a.mejorestudiantequimestrefoto=null),a.activities=f,a.formData={},a.publicPostForm=function(c,d){c.preventDefault();var e,f=document.getElementsByName(d)[0];e=new FormData(f),b({method:"POST",async:!0,url:Routing.generate("post_create"),data:e,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(b){if(200===b.status)return b.data;if(201===b.status){document.getElementsByClassName("timeline")[0];a.activities.unshift(b.data.activity),f.reset()}},function(a){console.log("ocurrio error"),alert("Ha ocurrido un  error al publicar este estado")})},$.sessionTimeout({title:"Su sesion esta a punto de expirar!",logoutButton:"Logout",keepAliveButton:"Seguir Conectado",message:"Su sesion sera bloqueada en 2 minutos",keepAliveUrl:"#",logoutUrl:"logout",redirUrl:"login",ignoreUserActivity:!1,warnAfter:24e4,redirAfter:36e4})}]);return b.configureApp(c),c.run(["$couchPotato",function(a){c.lazy=a}]),c});