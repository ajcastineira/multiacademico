"use strict";!function(){angular.module("blankonApp.maps.google",[]).controller("GoogleMapCtrl",["$scope","$window","$q",function(a,b,c){a.loadScript=function(){var a=document.createElement("script");a.src="https://maps.googleapis.com/maps/api/js?sensor=false&callback=initialize",document.body.appendChild(a)},a.lazyLoadApi=function(){var d=c.defer();return b.initialize=function(){d.resolve()},b.attachEvent?b.attachEvent("onload",a.loadScript()):b.addEventListener("load",a.loadScript(),!1),d.promise},a.mapStreetViewMarker=function(){var a=$("#map-street-view-marker");a.gmap3({map:{options:{zoom:18,center:new google.maps.LatLng(40.729884,-73.990988)}}});var b=a.gmap3("get"),c=b.getStreetView();c.setPosition(b.getCenter()),c.setPov({heading:265,zoom:1,pitch:0}),c.setVisible(!0)},a.mapMarker=function(){var a=$("#map-marker");a.gmap3({marker:{latLng:[29.132318972825445,81.32052349999992]}})},a.mapMultipleMarker=function(){var a=$("#multiple-marker");a.gmap3({map:{options:{center:[46.578498,2.457275],zoom:5}},marker:{values:[{latLng:[48.8620722,2.352047],data:"Paris !"},{address:"86000 Poitiers, France",data:"Poitiers : great city !"},{address:"66000 Perpignan, France",data:"Perpignan ! <br> GO USAP !",options:{icon:"http://maps.google.com/mapfiles/marker_green.png"}}],options:{draggable:!1},events:{mouseover:function(a,b,c){var d=$(this).gmap3("get"),e=$(this).gmap3({get:{name:"infowindow"}});e?(e.open(d,a),e.setContent(c.data)):$(this).gmap3({infowindow:{anchor:a,options:{content:c.data}}})},mouseout:function(){var a=$(this).gmap3({get:{name:"infowindow"}});a&&a.close()}}}})},a.mapAddress=function(){var a=$("#map-address");a.gmap3({marker:{address:"Haltern am See, Weseler Str. 151"},map:{options:{zoom:14}}})},a.mapTag=function(){var a=$("#map-tag"),b="black brown green purple yellow grey orange white".split(" "),c="A B C D E F".split(" ");a.gmap3({map:{options:{zoom:2,mapTypeId:google.maps.MapTypeId.TERRAIN},onces:{bounds_changed:function(){var a,d,e,f=$(this),g=f.gmap3("get").getBounds(),h=g.getSouthWest(),i=g.getNorthEast(),j=i.lng()-h.lng(),k=i.lat()-h.lat();for(a=0;50>a;a++)e=c[Math.floor(Math.random()*c.length)],d=b[Math.floor(Math.random()*b.length)],f.gmap3({marker:{latLng:[h.lat()+k*Math.random(),h.lng()+j*Math.random()],options:{icon:"http://maps.google.com/mapfiles/marker_"+d+e+".png"},tag:[d,e]}})}}}}),setTimeout(function(){$("#test").gmap3({clear:{name:"marker",tag:["black","brown","green","purple","A","B","C"],all:!0}})},3e3)},a.mapCircle=function(){var a=$("#map-circle");a.gmap3({circle:{options:{center:[37.772323,-122.214897],radius:250,fillColor:"#008BB2",strokeColor:"#005BB7"},events:{click:function(a){a.setOptions({fillColor:"#FFAF9F",strokeColor:"#FF512F"})}},callback:function(){$(this).gmap3("get").setZoom(15)}}})},a.mapElevation=function(){var a=$("#map-elevation");a.gmap3({marker:{latLng:[63.3333333,-150.5],options:{draggable:!0},events:{dragend:function(a){$(this).gmap3({getelevation:{latLng:a.getPosition(),callback:function(b){var c=$(this).gmap3("get"),d=$(this).gmap3({get:"infowindow"}),e=b&&b[0]?Math.round(b[0].elevation)+" meters":"no result";d?(d.open(c,a),d.setContent(e)):$(this).gmap3({infowindow:{anchor:a,options:{content:e}}})}}})}}},map:{options:{zoom:8,mapTypeId:google.maps.MapTypeId.TERRAIN}}})},a.mapInfoWindow=function(){var a=$("#map-info-window");a.gmap3({infowindow:{address:"Pourrieres, France",options:{content:"Blankon Fullpack Admin Theme Just $18"},events:{closeclick:function(a){alert("closing : "+a.getContent())}}}})},a.mapTraffic=function(){var a=$("#map-traffic");a.gmap3({map:{options:{center:[34.04924594193164,-118.24104309082031],zoom:13}}},"trafficlayer")},a.mapPanel=function(){var a=$("#map-panel");a.gmap3({panel:{options:{content:'<div id="panel-box"><div id="lat-north" class="line-panel"><div class="name">North</div><div class="value"></div></div><div id="lng-east" class="line-panel"><div class="name">East</div><div class="value"></div></div><div id="lat-south" class="line-panel"><div class="name">South</div><div class="value"></div></div><div id="lng-west" class="line-panel"><div class="name">West</div><div class="value"></div></div></div>',middle:!0,right:!0}},map:{options:{zoom:5},events:{bounds_changed:function(a){var b=a.getBounds(),c=b.getNorthEast(),d=b.getSouthWest();$("#lat-north").find(".value").html(c.lat()),$("#lng-east").find(".value").html(c.lng()),$("#lat-south").find(".value").html(d.lat()),$("#lng-west").find(".value").html(d.lng())}}}})},b.google&&b.google.maps?(console.log("gmaps already loaded"),a.mapStreetViewMarker(),a.mapMarker(),a.mapMultipleMarker(),a.mapAddress(),a.mapTag(),a.mapCircle(),a.mapElevation(),a.mapInfoWindow(),a.mapTraffic(),a.mapPanel()):a.lazyLoadApi().then(function(){console.log("promise resolved"),b.google&&b.google.maps?(console.log("gmaps loaded"),a.mapStreetViewMarker(),a.mapMarker(),a.mapMultipleMarker(),a.mapAddress(),a.mapTag(),a.mapCircle(),a.mapElevation(),a.mapInfoWindow(),a.mapTraffic(),a.mapPanel()):console.log("gmaps not loaded")},function(){console.log("promise rejected")})}])}();